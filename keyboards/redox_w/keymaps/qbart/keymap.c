#include QMK_KEYBOARD_H
#include "quantum.h"
#include "keymap_polish.h"

#define _QWERTY 0
#define _SYM 1
#define _NAV 2

enum custom_keycodes {
    QWERTY = SAFE_RANGE,
    SYM,
    NAV,
};

enum {
    _LBRC,
    _RBRC,
    _DLR_UP,
};

qk_tap_dance_action_t tap_dance_actions[] = {
    [_LBRC]   = ACTION_TAP_DANCE_DOUBLE(KC_LBRC, KC_LCBR),
    [_RBRC]   = ACTION_TAP_DANCE_DOUBLE(KC_RBRC, KC_RCBR),
    [_DLR_UP] = ACTION_TAP_DANCE_DOUBLE(KC_DLR, KC_UP),
};

#define CUSTOM_1 MT(MOD_RALT, KC_RIGHT)

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_QWERTY] = LAYOUT(
  //┌────────────┬──────────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────────────┬────────┐
     KC_GRV      ,KC_1          ,KC_2    ,KC_3    ,KC_4    ,KC_5    ,                                            KC_6    ,KC_7    ,KC_8    ,KC_9    ,KC_0            ,KC_BSPC ,
  //├────────────┼──────────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────────────┼────────┤
     KC_TAB      ,PL_Q          ,PL_W    ,PL_E    ,PL_R    ,PL_T    ,KC_HASH ,                          KC_AT   ,PL_Y    ,PL_U    ,PL_I    ,PL_O    ,PL_P            ,KC_ASTR ,
  //├────────────┼──────────────┼────────┼────────┼────────┼────────┼────────┤                         ├────────┼────────┼────────┼────────┼────────┼────────────────┼────────┤
LT(_SYM, KC_QUOT),PL_A          ,PL_S    ,PL_D    ,PL_F    ,PL_G    ,TD(_LBRC),                        TD(_RBRC),PL_H    ,PL_J    ,PL_K    ,PL_L    ,KC_SCLN         ,KC_EQL  ,
  //├────────────┼──────────────┼────────┼────────┼────────┼────────┼────────┼────────┐       ┌────────┼────────┼────────┼────────┼────────┼────────┼────────────────┼────────┤
     KC_DQT      ,LCTL_T(PL_Z)  ,PL_X    ,PL_C    ,PL_V    ,PL_B    ,KC_DEL  ,KC_F5   ,        KC_CAPS ,KC_BSLS ,PL_N    ,PL_M    ,KC_COMM ,KC_DOT  ,RCTL_T(KC_SLSH) ,KC_MINUS ,
  //├────────────┼──────────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┤       ├────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────────────┼────────┤
 LOPT_T(KC_DEL)  ,KC_EXLM       ,KC_PIPE ,KC_AMPR ,     KC_LSPO ,    KC_SPC  ,KC_ESC  ,        KC_LGUI ,KC_ENT  ,    KC_RSPC ,  TD(_DLR_UP),CUSTOM_1, KC_LEAD        ,TO(_NAV)
  //└────────────┴──────────────┴────────┴────────┘    └────────┘   └────────┴────────┘       └────────┴────────┘   └────────┘    └────────┴────────┴────────────────┴────────┘
  ),

  [_SYM] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────    
     KC_BRK  ,KC_F1   ,KC_F2   ,KC_F3   ,KC_F4   ,KC_F5   ,                                            KC_F6   ,KC_F7   ,KC_F8   ,KC_F9   ,KC_F10  ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     KC_PSCR ,_______ ,_______ ,_______ ,_______ ,_______ ,KC_F11  ,                          KC_F12  ,_______ ,_______	,_______ ,_______ ,_______ ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┤                         ├────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,_______ ,                          _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┼────────┐       ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,_______ ,RESET   ,        _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,_______ ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┤       ├────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┼────────┤
     _______ ,_______ ,_______ ,_______ ,     _______ ,    _______ ,_______ ,        _______ ,_______ ,    _______ ,     _______ ,_______ ,_______ ,XXXXXXX 
  //└────────┴────────┴────────┴────────┘    └────────┘   └────────┴────────┘       └────────┴────────┘   └────────┘    └────────┴────────┴────────┴────────┘
  ),

  [_NAV] = LAYOUT(
  //┌────────┬────────┬────────┬────────┬────────┬────────┐                                           ┌────────┬────────┬────────┬────────┬────────┬────────┐
     _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,                                            _______ ,_______ ,_______ ,_______ ,_______ ,_______ ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┐                         ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     XXXXXXX ,XXXXXXX ,KC_WH_D ,KC_MS_U ,KC_WH_U ,XXXXXXX ,_______ ,                          _______ ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┤                         ├────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     XXXXXXX ,KC_WH_L ,KC_MS_L ,KC_MS_D ,KC_MS_R ,KC_WH_R ,_______ ,                          _______ ,XXXXXXX ,KC_LEFT ,KC_DOWN ,KC_UP   ,KC_RIGHT,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────────┼────────┼────────┼────────┐       ┌────────┼────────┼────────┼────────┼────────┼────────┼────────┼────────┤
     XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,_______ ,_______ ,        _______ ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,
  //├────────┼────────┼────────┼────────┼────┬───┴────┬───┼────────┼────────┤       ├────────┼────────┼───┬────┴───┬────┼────────┼────────┼────────┼────────┤
     XXXXXXX ,XXXXXXX ,XXXXXXX ,XXXXXXX ,     KC_BTN1 ,    KC_BTN2 ,_______ ,        _______ ,_______ ,    XXXXXXX ,     XXXXXXX ,XXXXXXX ,XXXXXXX ,TO(_QWERTY)
  //└────────┴────────┴────────┴────────┘    └────────┘   └────────┴────────┘       └────────┴────────┘   └────────┘    └────────┴────────┴────────┴────────┘
  )

};

// clang-format on
#ifdef LEADER_ENABLE
LEADER_EXTERNS();

void matrix_scan_user(void) {
    LEADER_DICTIONARY() {
        leading = false;
        // TODO
        leader_end();
    }
}
#endif
